<extend name="Public/basic"/>
<block name="style">
	<style type='text/css'>
	    .tab-pane {padding:20px 0 20px 0;}
		.help-block em{display:inline-block;width:10em;font-weight:bold;font-style:normal;}
	</style>
</block>
<block name="body">
	<ul class="nav nav-tabs">
		<li class="active"><a href="{:U('')}">商城入口</a></li>
	</ul>
	<div class="col-xs-12 col-sm-9 col-lg-10">
		<div class="alert alert-info">
			通过设定这里的选项(商城入口)来进入微站的一个独立功能中. 这里的选项是通过微信(易信或App)中的图文消息来回复, 点击图文链接进入微站特定功能. <br>
			如果你有oAuth权限也可以直接设置自定义菜单到指定链接位置.
		</div>
		<div class="clearfix ng-scope">
			<form id="reply-form" class="form-horizontal form ng-pristine ng-valid" action="" method="post" enctype="multipart/form-data">
				<div class="panel panel-default">
					<div class="panel-heading">
						直接连接 <span class="text-muted">直接进入的URL</span>
					</div>
					<div class="panel-body">
						<div class="form-group">
							<label class="col-xs-12 col-sm-3 col-md-2 control-label">直接URL</label>
							<div class="col-sm-9 col-xs-12 ">
								<input type="text" class="form-control" readonly="readonly" name="url" value="{$url}">
								<span class="help-block">
									<strong>直接指向到入口的URL。您可以在自定义菜单（有oAuth权限）或是其它位置直接使用。</strong>
								</span>
							</div>
						</div>
					</div>
				</div>
				
				<div class="panel panel-default">
					<div class="panel-heading">
						功能封面 <span class="text-muted">商城入口</span>
					</div>
					<div class="panel-body">
					
						<div class="form-group">
							<label class="col-xs-12 col-sm-3 col-md-2 control-label">封面名称</label>
							<div class="col-sm-6 col-xs-12">
								<input type="text" class="form-control" readonly="readonly" value="{$arr['title']}">
								<span class="help-block">
									<strong>选择高级设置: 将会提供一系列的高级选项供专业用户使用.</strong>
								</span>
							</div>
		
							<div class="col-sm-3">
								<div class="checkbox">
									<label>
										<input type="checkbox" class="ng-pristine ng-untouched ng-valid"> 高级设置（暂无）
									</label>
								</div>
							</div>
						</div>
						
						<div class="form-group">
							<label class="col-xs-12 col-sm-3 col-md-2 control-label">触发关键字</label>
							<div class="col-sm-6 col-xs-12">
								<input type="text" class="form-control" placeholder="请输入触发关键字" name="keywords" value="{$arr['keywords']}">
								<span class="help-block">
				
									当用户的对话内容符合以上的关键字定义时，会触发这个回复定义。多个关键字请使用逗号隔开. <br>
				
									<strong>选择高级触发: 将会提供一系列的高级触发方式供专业用户使用(注意: 如果你不了解, 请不要使用). </strong>
				
								</span>
							</div>
							<div class="col-sm-3">
								<div class="checkbox">
									<label>
										<input type="checkbox" ng-model="reply.advTrigger" class="ng-pristine ng-untouched ng-valid"> 高级触发（暂无）
									</label>
								</div>
							</div>
						</div>
						
						<div class="form-group">

							<label class="col-xs-12 col-sm-3 col-md-2 control-label">封面参数</label>
		
							<div class="col-sm-9">
		
								<div class="panel panel-default reply-container" style="padding-top:2em;">
									<if condition="$operation neq display">
									<div class="ng-hide">
		
										<div class="form-group">
											<label class="col-xs-12 col-sm-3 col-md-2 control-label">标题</label>
											<div class="col-sm-9 col-xs-12">
												<input type="text" class="form-control ng-pristine ng-untouched ng-valid" placeholder="标题" name="title" value="{$arr['title']}">
											</div>
										</div>
		
										<div class="form-group">
											<label class="col-xs-12 col-sm-3 col-md-2 control-label">封面</label>
											<div class="col-sm-9 col-xs-12">
												{:tpl_form_field_image('thumb', $arr['thumb'])}
        										<span class="help-block">建议尺寸: 640 * 320 ，或长方型图片 </span>
        									</div>
										</div>
		
										<div class="form-group">
											<label class="col-xs-12 col-sm-3 col-md-2 control-label">描述</label>
											<div class="col-sm-9 col-xs-12">
												<textarea class="form-control ng-pristine ng-untouched ng-valid" placeholder="添加图文消息的简短描述" name="description" ></textarea>
											</div>
										</div>
		
										<div class="form-group">
											<label class="col-xs-12 col-sm-3 col-md-2 control-label">直接URL</label>
											<div class="col-sm-9 col-xs-12">
												<p class="form-control-static" style="white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">{$url}</p>
											</div>
										</div>
									</div>
									<else />
									<div class="row">
										<div class="col-sm-8">
											<div class="panel panel-default">
												<input type="hidden" name="title" value="{$arr['title']}" />	
												<input type="hidden" name="thumb" value="{$arr['thumb']}" />	
												<input type="hidden" name="description" value="{$arr['description']}" />	
												<div class="panel-heading">
													<h4 class="form-control-static ng-binding">商城</h4>
													<img class="img-rounded" style="width:100%;height:12em;margin-top:0.8em;" src="{:tomedia($arr['thumb'])}">
													<span class="help-block ng-binding"></span>
												</div>
												<div class="panel-footer" style="border-top:0;">
													<a href="{$url}" target="_blank" class="btn btn-defualt btn-block">查看原文</a>
												</div>
											</div>
										</div>
									</div>
									</if>
								</div>
							</div>
						</div>
						
						<div class="form-group">
							<div class="col-sm-12">
								<input name="submit" type="submit" value="保存" class="btn btn-primary">
								<a href="{:U('shop/index',array('op'=>'post'))}" class="btn btn-default">编辑</a>
							</div>
						</div>
						
					</div>
				</div>
			</form>
		</div>
	</div>
</block>
<block name="script">
	<script type="text/javascript">
		highlight_subnav("{:U('Shop/index')}");
	</script>
	<script>
		require(['bootstrap'], function ($) {
		    $('.btn').hover(function () {
		        $(this).tooltip('show');
		    }, function () {
		        $(this).tooltip('hide');
		    });
		});
	</script>
</block>